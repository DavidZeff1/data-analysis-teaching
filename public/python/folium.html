<div class="space-y-4">
  <h1 class="text-2xl font-bold">Folium: Interactive Maps in Python</h1>
  
  <div>
    <h2 class="font-bold text-lg">What is Folium?</h2>
    <p>Folium is a powerful Python library used for creating interactive maps. It builds on the data-wrangling strengths of Python and the mapping strengths of the Leaflet.js library. It allows you to visualize data that's been manipulated in Python on an interactive Leaflet map.</p>
    
    <div class="grid grid-cols-3 gap-3 mt-3">
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 text-center">
        <div class="text-2xl mb-1">üó∫Ô∏è</div>
        <div class="font-semibold text-blue-700">Interactive</div>
        <p class="text-xs text-gray-600">Zoom, pan, and click functionality out of the box</p>
      </div>
      <div class="bg-green-50 border border-green-200 rounded-lg p-3 text-center">
        <div class="text-2xl mb-1">üìç</div>
        <div class="font-semibold text-green-700">Customizable Markers</div>
        <p class="text-xs text-gray-600">Easily add markers, popups, and tooltips</p>
      </div>
      <div class="bg-purple-50 border border-purple-200 rounded-lg p-3 text-center">
        <div class="text-2xl mb-1">üåç</div>
        <div class="font-semibold text-purple-700">Choropleth Maps</div>
        <p class="text-xs text-gray-600">Visualize regional data with color gradients</p>
      </div>
    </div>
    
    <div class="bg-gray-800 text-white p-3 rounded mt-4">
      <pre class="text-sm"><span class="text-gray-400"># Installation</span>
!pip install folium

<span class="text-blue-400">import</span> folium</pre>
    </div>
  </div>

  <div class="border-t-4 border-blue-500 pt-4">
    <h2 class="font-bold text-xl text-blue-700">1. Basic Map Creation</h2>
    <p class="text-sm text-gray-600 mb-3">Creating a map is as simple as calling <code>folium.Map()</code> and providing the center coordinates.</p>
    
    <div class="bg-white border border-gray-200 rounded-lg p-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="space-y-4">
          <div class="bg-gray-800 text-white p-3 rounded text-sm">
            <pre><span class="text-gray-400"># Create a basic map centered at a location</span>
m = folium.Map(location=[<span class="text-green-400">45.5236</span>, <span class="text-green-400">-122.6750</span>], zoom_start=<span class="text-green-400">13</span>)

<span class="text-gray-400"># Save it to an HTML file</span>
m.save(<span class="text-green-400">"index.html"</span>)</pre>
          </div>
          <p class="text-xs text-gray-600">
            <strong>location:</strong> Latitude and Longitude of the center.<br>
            <strong>zoom_start:</strong> Initial zoom level (higher is closer).<br>
            <strong>tiles:</strong> Map style (e.g., "OpenStreetMap", "CartoDB positron").
          </p>
        </div>
        <div class="flex items-center justify-center bg-gray-50 border border-gray-200 rounded-lg p-4">
          <div class="text-center text-gray-400 italic">
            <p>Interactive Map Preview</p>
            <p class="text-xs">(Requires HTML rendering)</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="border-t-4 border-green-500 pt-4">
    <h2 class="font-bold text-xl text-green-700">2. Markers and Popups</h2>
    <p class="text-sm text-gray-600 mb-3">Add points of interest to your map with markers. Custom popups and tooltips provide more info.</p>
    
    <div class="bg-white border border-gray-200 rounded-lg p-4">
      <div class="bg-gray-800 text-white p-3 rounded text-sm mb-4">
        <pre><span class="text-gray-400"># Add a standard marker</span>
folium.Marker(
    location=[<span class="text-green-400">45.5236</span>, <span class="text-green-400">-122.6750</span>],
    popup=<span class="text-green-400">"Portland, OR"</span>,
    tooltip=<span class="text-green-400">"Click for more info"</span>
).add_to(m)

<span class="text-gray-400"># Add a circular marker</span>
folium.CircleMarker(
    location=[<span class="text-green-400">45.5215</span>, <span class="text-green-400">-122.6261</span>],
    radius=<span class="text-green-400">50</span>,
    popup=<span class="text-green-400">"Laurelhurst Park"</span>,
    color=<span class="text-green-400">"#3186cc"</span>,
    fill=<span class="text-purple-400">True</span>,
    fill_color=<span class="text-green-400">"#3186cc"</span>
).add_to(m)</pre>
      </div>
      <div class="bg-green-50 rounded p-3">
        <p class="text-sm"><strong>üí° Tip:</strong> Popups can contain HTML, allowing you to embed images, charts, or links inside the marker info window!</p>
      </div>
    </div>
  </div>

  <div class="border-t-4 border-purple-500 pt-4">
    <h2 class="font-bold text-xl text-purple-700">3. Choropleth Maps</h2>
    <p class="text-sm text-gray-600 mb-3">Choropleth maps use color gradients to represent data values across geographic regions. Works with GeoJSON, GeoDataFrames, shapefiles, and more.</p>
    
    <div class="bg-white border border-gray-200 rounded-lg p-4 mb-3">
      <h3 class="font-semibold text-md mb-2">Method 1: Using GeoDataFrame (Most Common)</h3>
      <div class="bg-gray-800 text-white p-3 rounded text-sm mb-3">
        <pre><span class="text-gray-400"># GeoDataFrame already has geometry and data together</span>
folium.Choropleth(
    geo_data=gdf,                          <span class="text-gray-400"># GeoDataFrame with geometry</span>
    data=gdf,                              <span class="text-gray-400"># Same GeoDataFrame with values</span>
    columns=[<span class="text-green-400">'community_area'</span>, <span class="text-green-400">'crime_per_population'</span>],
    key_on=<span class="text-green-400">'feature.properties.community_area'</span>,  <span class="text-gray-400"># Match column name</span>
    fill_color=<span class="text-green-400">'YlOrRd'</span>,              <span class="text-gray-400"># Yellow-Orange-Red gradient</span>
    fill_opacity=<span class="text-green-400">0.7</span>,
    line_opacity=<span class="text-green-400">0.2</span>,
    legend_name=<span class="text-green-400">'Crime per Population'</span>
).add_to(m)</pre>
      </div>
    </div>

    <div class="bg-white border border-gray-200 rounded-lg p-4 mb-3">
      <h3 class="font-semibold text-md mb-2">Method 2: Separate GeoJSON File + DataFrame</h3>
      <div class="bg-gray-800 text-white p-3 rounded text-sm mb-3">
        <pre><span class="text-gray-400"># When geometry and data are separate</span>
folium.Choropleth(
    geo_data=<span class="text-green-400">'states.geojson'</span>,        <span class="text-gray-400"># GeoJSON file path</span>
    data=state_data,                   <span class="text-gray-400"># Pandas DataFrame</span>
    columns=[<span class="text-green-400">'State'</span>, <span class="text-green-400">'Unemployment'</span>],
    key_on=<span class="text-green-400">'feature.id'</span>,               <span class="text-gray-400"># Match GeoJSON property</span>
    fill_color=<span class="text-green-400">'YlGn'</span>,
    fill_opacity=<span class="text-green-400">0.7</span>,
    line_opacity=<span class="text-green-400">0.2</span>,
    legend_name=<span class="text-green-400">'Unemployment Rate (%)'</span>
).add_to(m)</pre>
      </div>
    </div>

    <div class="bg-white border border-gray-200 rounded-lg p-4 mb-3">
      <h3 class="font-semibold text-md mb-2">Method 3: From Shapefile</h3>
      <div class="bg-gray-800 text-white p-3 rounded text-sm mb-3">
        <pre><span class="text-gray-400"># Load shapefile first, then use as GeoDataFrame</span>
gdf = gpd.read_file(<span class="text-green-400">'boundaries.shp'</span>)
gdf = gdf.merge(data_df, on=<span class="text-green-400">'id_column'</span>)

folium.Choropleth(
    geo_data=gdf,
    data=gdf,
    columns=[<span class="text-green-400">'id_column'</span>, <span class="text-green-400">'value_column'</span>],
    key_on=<span class="text-green-400">'feature.properties.id_column'</span>,
    fill_color=<span class="text-green-400">'RdYlGn'</span>,              <span class="text-gray-400"># Red-Yellow-Green</span>
    fill_opacity=<span class="text-green-400">0.7</span>,
    line_opacity=<span class="text-green-400">0.2</span>,
    legend_name=<span class="text-green-400">'Value'</span>
).add_to(m)</pre>
      </div>
    </div>

    <div class="bg-blue-50 rounded p-3 mb-3">
      <p class="text-sm mb-2"><strong>üîë Key Parameters Explained:</strong></p>
      <ul class="text-sm space-y-1 ml-4">
        <li><strong>geo_data:</strong> GeoDataFrame, GeoJSON file path, or GeoJSON dict</li>
        <li><strong>data:</strong> DataFrame with your values (can be same as geo_data)</li>
        <li><strong>columns:</strong> [ID column, value column] - links data to shapes</li>
        <li><strong>key_on:</strong> 'feature.properties.COLUMN_NAME' - must match ID column</li>
        <li><strong>fill_color:</strong> Color scheme - 'YlOrRd', 'YlGn', 'RdYlGn', 'Blues', etc.</li>
      </ul>
    </div>

    <div class="bg-yellow-50 rounded p-3">
      <p class="text-sm"><strong>‚ö†Ô∏è Common Issue:</strong> If <code>key_on='feature.properties.community_area'</code>, your <code>columns</code> must include <code>'community_area'</code> as the first element. They must match exactly (case-sensitive)!</p>
    </div>
  </div>

  <div class="bg-white border border-gray-200 rounded-lg p-4 mb-3">
  <h3 class="font-semibold text-md mb-2">Adding Hover Tooltips</h3>
  <div class="bg-gray-800 text-white p-3 rounded text-sm mb-3">
    <pre><span class="text-gray-400"># Choropleth doesn't support hover by default - add GeoJson layer on top</span>

<span class="text-gray-400"># 1. Create the choropleth (colors)</span>
folium.Choropleth(
    geo_data=gdf,
    data=gdf,
    columns=[<span class="text-green-400">'community_area'</span>, <span class="text-green-400">'crime_per_population'</span>],
    key_on=<span class="text-green-400">'feature.properties.community_area'</span>,
    fill_color=<span class="text-green-400">'YlOrRd'</span>,
    fill_opacity=<span class="text-green-400">0.7</span>,
    line_opacity=<span class="text-green-400">0.2</span>,
    legend_name=<span class="text-green-400">'Crime per Population'</span>
).add_to(m)

<span class="text-gray-400"># 2. Add invisible GeoJson layer for tooltips</span>
folium.GeoJson(
    gdf,
    style_function=<span class="text-purple-400">lambda</span> x: {
        <span class="text-green-400">'fillColor'</span>: <span class="text-green-400">'transparent'</span>,  <span class="text-gray-400"># Make it invisible</span>
        <span class="text-green-400">'color'</span>: <span class="text-green-400">'transparent'</span>           <span class="text-gray-400"># Hide borders too</span>
    },
    tooltip=folium.GeoJsonTooltip(
        fields=[<span class="text-green-400">'community_area'</span>, <span class="text-green-400">'crime_per_population'</span>, <span class="text-green-400">'crime_count'</span>],
        aliases=[<span class="text-green-400">'Community:'</span>, <span class="text-green-400">'Crime per Pop:'</span>, <span class="text-green-400">'Total Crimes:'</span>],
        localize=<span class="text-purple-400">True</span>
    )
).add_to(m)</pre>
  </div>
  <div class="bg-green-50 rounded p-3">
    <p class="text-sm"><strong>üí° How it works:</strong> The GeoJson layer is invisible but captures mouse events. When you hover, it shows the tooltip with your data. The <code>fields</code> parameter specifies which columns to display, and <code>aliases</code> provides friendly labels.</p>
  </div>
</div>

  <div class="border-t-4 border-yellow-500 pt-4">
    <h2 class="font-bold text-xl text-yellow-700">4. Best Practices</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
      <div class="bg-white border border-gray-200 rounded-lg p-4">
        <h3 class="font-bold text-sm mb-2">Performance</h3>
        <ul class="text-xs space-y-1 list-disc pl-4">
          <li>Limit the number of markers (hundreds are fine, thousands can lag).</li>
          <li>Use <code>MarkerCluster</code> for high-density point data.</li>
          <li>Optimize GeoJSON files (compress using tools like mapshaper).</li>
        </ul>
      </div>
      <div class="bg-white border border-gray-200 rounded-lg p-4">
        <h3 class="font-bold text-sm mb-2">User Experience</h3>
        <ul class="text-xs space-y-1 list-disc pl-4">
          <li>Choose a tile layer that doesn't distract from your data.</li>
          <li>Always provide a legend for choropleth maps.</li>
          <li>Set appropriate initial zoom and center points.</li>
        </ul>
      </div>
    </div>
  </div>
</div>
