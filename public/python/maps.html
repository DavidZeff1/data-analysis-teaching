<div class="space-y-6">
  <div class="border-b pb-4">
    <h1 class="text-3xl font-bold text-gray-800">
      Geospatial Visualization: Putting Data on the Map
    </h1>
    <p class="text-gray-600 mt-2 text-lg">
      From static publication-quality plots to interactive web maps.
      <br />
      <span class="text-sm italic"
        >Prerequisite: Familiarity with GeoPandas (see the Geospatial tab).</span
      >
    </p>
  </div>

  <!-- Part 1: Static Maps -->
  <div class="border-l-4 border-indigo-500 pl-4">
    <h2 class="font-bold text-xl text-indigo-700">
      1. Static Maps with GeoPandas
    </h2>
    <p class="mt-2 text-gray-700">
      The quickest way to see your data. Uses <code>matplotlib</code> under the
      hood. Perfect for reports, papers, and quick EDA.
    </p>

    <div class="mt-3 bg-white border border-gray-200 rounded-lg p-4">
      <h3 class="font-semibold text-gray-700 mb-2">The Basic .plot()</h3>
      <div class="bg-gray-800 text-white p-3 rounded text-sm overflow-x-auto">
        <pre><span class="text-purple-400">import</span> geopandas <span class="text-purple-400">as</span> gpd
<span class="text-purple-400">import</span> matplotlib.pyplot <span class="text-purple-400">as</span> plt

<span class="text-gray-500"># Load data (e.g. world countries)</span>
world = gpd.read_file(gpd.datasets.get_path(<span class="text-green-300">'naturalearth_lowres'</span>))

<span class="text-gray-500"># Basic plot</span>
world.plot()
plt.show()</pre>
      </div>
    </div>

    <div class="mt-3 bg-white border border-gray-200 rounded-lg p-4">
      <h3 class="font-semibold text-gray-700 mb-2">Customizing the Look</h3>
      <p class="text-sm text-gray-600 mb-2">
        Since it's matplotlib, you have full control.
      </p>
      <div class="bg-gray-800 text-white p-3 rounded text-sm overflow-x-auto">
        <pre>world.plot(
    color=<span class="text-green-300">'white'</span>,      <span class="text-gray-500"># Fill color</span>
    edgecolor=<span class="text-green-300">'black'</span>,  <span class="text-gray-500"># Border color</span>
    linewidth=<span class="text-yellow-400">0.5</span>,      <span class="text-gray-500"># Border width</span>
    figsize=(<span class="text-yellow-400">15</span>, <span class="text-yellow-400">10</span>),   <span class="text-gray-500"># Image size</span>
    alpha=<span class="text-yellow-400">0.9</span>           <span class="text-gray-500"># Transparency</span>
)
plt.axis(<span class="text-green-300">'off'</span>)       <span class="text-gray-500"># Remove axis ticks</span>
plt.title(<span class="text-green-300">"The World"</span>, fontsize=<span class="text-yellow-400">20</span>)</pre>
      </div>
    </div>

    <div class="mt-3 bg-indigo-50 p-4 rounded-lg">
      <h3 class="font-semibold text-indigo-800 mb-2">Layering Maps</h3>
      <p class="text-sm text-indigo-700">
        Plot multiple layers on the same "axis" (canvas). Order matters!
      </p>
      <div
        class="bg-gray-800 text-white p-3 rounded mt-2 text-sm overflow-x-auto"
      >
        <pre>fig, ax = plt.subplots(figsize=(<span class="text-yellow-400">10</span>, <span class="text-yellow-400">10</span>))

<span class="text-gray-500"># Layer 1: Base (Countries)</span>
world.plot(ax=ax, color=<span class="text-green-300">'lightgrey'</span>)

<span class="text-gray-500"># Layer 2: Cities</span>
cities = gpd.read_file(gpd.datasets.get_path(<span class="text-green-300">'naturalearth_cities'</span>))
cities.plot(ax=ax, color=<span class="text-green-300">'red'</span>, markersize=<span class="text-yellow-400">5</span>)</pre>
      </div>
    </div>
  </div>

  <!-- Part 2: Choropleth Maps -->
  <div class="border-l-4 border-green-500 pl-4">
    <h2 class="font-bold text-xl text-green-700">
      2. Choropleth Maps (Color by Value)
    </h2>
    <p class="mt-2 text-gray-700">
      Coloring regions based on a data column (e.g., GDP, population).
    </p>

    <div class="mt-3 bg-white border border-gray-200 rounded-lg p-4">
      <div class="bg-gray-800 text-white p-3 rounded text-sm overflow-x-auto">
        <pre>world.plot(
    column=<span class="text-green-300">'pop_est'</span>,           <span class="text-gray-500"># Column to visualize</span>
    legend=<span class="text-blue-300">True</span>,                <span class="text-gray-500"># Show scale bar</span>
    legend_kwds={<span class="text-green-300">'label'</span>: <span class="text-green-300">"Population by Country"</span>},
    cmap=<span class="text-green-300">'OrRd'</span>,                <span class="text-gray-500"># Color map (Oranges-Reds)</span>
    scheme=<span class="text-green-300">'quantiles'</span>,         <span class="text-gray-500"># Binning scheme (needs mapclassify)</span>
    k=<span class="text-yellow-400">5</span>                         <span class="text-gray-500"># Number of bins</span>
)</pre>
      </div>
    </div>
    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3 mt-3">
      <p class="text-sm text-yellow-800">
        <strong>Tip:</strong> Install <code>mapclassify</code> for advanced
        binning schemes like 'quantiles', 'fisherjenks', or 'equal_interval'.
      </p>
    </div>
  </div>

  <!-- Part 3: Interactive Maps -->
  <div class="border-l-4 border-teal-500 pl-4">
    <h2 class="font-bold text-xl text-teal-700">
      3. Interactive Maps with Folium
    </h2>
    <p class="mt-2 text-gray-700">
      Use <code>folium</code> to create Leaflet.js maps in Python. Zoomable,
      clickable, shareable HTML files.
    </p>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3">
      <div class="bg-white border border-gray-200 rounded-lg p-4">
        <h3 class="font-semibold text-teal-700 mb-2">Basic Map</h3>
        <div class="bg-gray-800 text-white p-2 rounded text-xs overflow-x-auto">
          <pre><span class="text-purple-400">import</span> folium

<span class="text-gray-500"># Center on Chicago</span>
m = folium.Map(
    location=[<span class="text-yellow-400">41.8781</span>, <span class="text-yellow-400">-87.6298</span>],
    zoom_start=<span class="text-yellow-400">12</span>,
    tiles=<span class="text-green-300">'CartoDB positron'</span>
)
m  <span class="text-gray-500"># Display in notebook</span></pre>
        </div>
      </div>
      <div class="bg-white border border-gray-200 rounded-lg p-4">
        <h3 class="font-semibold text-teal-700 mb-2">Adding Markers</h3>
        <div class="bg-gray-800 text-white p-2 rounded text-xs overflow-x-auto">
          <pre>folium.Marker(
    [<span class="text-yellow-400">41.8781</span>, <span class="text-yellow-400">-87.6298</span>],
    popup=<span class="text-green-300">"Willis Tower"</span>,
    tooltip=<span class="text-green-300">"Click me!"</span>,
    icon=folium.Icon(color=<span class="text-green-300">'red'</span>)
).add_to(m)</pre>
        </div>
      </div>
    </div>

    <div class="mt-3 bg-white border border-gray-200 rounded-lg p-4">
      <h3 class="font-semibold text-gray-700 mb-2">
        Mapping a GeoDataFrame with Folium
      </h3>
      <p class="text-sm text-gray-600 mb-2">
        No need for manual loops. Use <code>GeoJson</code> or
        <code>explore()</code>.
      </p>
      <div class="bg-gray-800 text-white p-3 rounded text-sm overflow-x-auto">
        <pre><span class="text-gray-500"># The modern, easy way (GeoPandas 0.10+)</span>
gdf.explore(
    column=<span class="text-green-300">'population'</span>,  <span class="text-gray-500"># Color by column</span>
    cmap=<span class="text-green-300">'viridis'</span>,       <span class="text-gray-500"># Color map</span>
    legend=<span class="text-blue-300">True</span>,
    tiles=<span class="text-green-300">'CartoDB positron'</span>
)

<span class="text-gray-500"># The manual, customizable way</span>
folium.GeoJson(
    gdf,
    name=<span class="text-green-300">"Neighborhoods"</span>,
    popup=folium.GeoJsonPopup(fields=[<span class="text-green-300">'name'</span>, <span class="text-green-300">'pop'</span>])
).add_to(m)</pre>
      </div>
    </div>
  </div>

  <!-- Part 4: Basemaps -->
  <div class="border-l-4 border-orange-500 pl-4">
    <h2 class="font-bold text-xl text-orange-700">4. Adding Context (Basemaps)</h2>
    <p class="mt-2 text-gray-700">
      Static plots often float in white space. Use <code>contextily</code> to add
      street or satellite tiles to static plots.
    </p>

    <div class="mt-3 bg-white border border-gray-200 rounded-lg p-4">
      <div class="bg-gray-800 text-white p-3 rounded text-sm overflow-x-auto">
        <pre><span class="text-purple-400">import</span> contextily <span class="text-purple-400">as</span> cx

<span class="text-gray-500"># 1. Project to Web Mercator (Required for most tiles!)</span>
data_wm = gdf.to_crs(epsg=<span class="text-yellow-400">3857</span>)

<span class="text-gray-500"># 2. Plot data</span>
ax = data_wm.plot(figsize=(<span class="text-yellow-400">10</span>, <span class="text-yellow-400">10</span>), alpha=<span class="text-yellow-400">0.5</span>, edgecolor=<span class="text-green-300">'k'</span>)

<span class="text-gray-500"># 3. Add basemap</span>
cx.add_basemap(ax, source=cx.providers.OpenStreetMap.Mapnik)</pre>
      </div>
    </div>
  </div>
</div>
